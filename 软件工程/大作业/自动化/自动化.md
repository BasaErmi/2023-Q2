### 自动化

​		在实现本项目的自动化方面，我们主要聚焦以下几个要素：编译打包，包管理，脚手架，运行环境管理，自动化测试和持续集成。目的是将软件开发过程中，大量重复，程序性和非创造性的工作自动化，在提升项目推进效率的同时，减少人为因素带来的错误和干扰，从而提升项目的总体质量。

#### 编译打包

编译打包是软件开发中的一个关键环节，它可以大大减少在新环境中配置和设置所需的工作量，使得软件的安装、升级和分发变得更加高效和可靠。

- **可分发格式**：它涉及将应用程序的代码、库、依赖项以及配置文件等组合在一起，形成一个可分发的格式。本项目中，借助文件`.github/workflows/modification.yml`触发 GitHub 的 Action系统，每次特定分支有新的提交时将仓库里的代码编译为可执行文件。
- **二进制流下载**：每次编译完成之后，可以通过特定的下载接口，直接下载二进制文件，不需要在本地重复编译而可以直接执行。
- **容器化技术**：开发者可使用容器化技术（如Docker）将所有依赖打包成一个标准化的单元，用于软件开发和部署。

#### 包管理

包管理涉及对软件依赖项和库的管理，确保项目能够正确地构建和运行。开发者可以借助包管理轻松地添加、更新和删除项目中的依赖项，同时解决依赖冲突。

- **rust配置文件**：本项目由 Cargo.toml 作为配置文件，来指定需要的包以及版本，一个项目的 Cargo.toml 可能不止一个。

#### 脚手架

脚手架（Scaffold）作为代码模板，提供通用的代码结构和相关的配置文件，以便开发人员快速开始项目的开发。其中通常包括项目结构、依赖项、配置文件和公共代码库等内容，能够帮助开发人员快速搭建起一个可靠的基础框架。

- **cargo脚手架**：项目开发过程中使用cargo的脚手架功能，使用预定义的模板来生成新的 Rust 项目，期间可以指定一个模板仓库或本地模板目录，并根据模板中的指令生成项目结构和初始代码。

#### 运行环境管理

运行环境包括了硬件支持和软件环境等软件运行所需的平台和条件，涉及对操作系统、数据库、中间件、依赖库等软件组件的配置和管理，确保了软件能够正常运行。

- **运行环境**：项目中，使用`runs-on`字段指定每个作业运行的虚拟环境。分别使用了`windows-latest`、`macos-latest`和`ubuntu-latest`。
- **工具链设置**：项目中，使用`rustup default nightly-msvc`（对于Windows）和`rustup default nightly`（对于macOS和Linux）命令设置Rust工具链的默认版本为nightly。这是因为某些Rust特性或依赖可能需要nightly版本。

#### 自动化测试

自动化测试用于解决手动测试低效繁琐的问题，通过使用自动化工具和脚本来执行测试任务。它包含了单元测试、集成测试和系统测试等。

- **构建和测试**：在Windows环境下，配置了构建（`cargo build --release`）和重命名输出文件的步骤。对于macOS和Linux环境，使用了`cargo check`命令来检查代码，确保没有编译错误。因为虚拟环境不能运行有 GUI 的游戏，但`cargo check`是验证代码健康的一种快速方式。
- **缓存依赖**：使用`actions/cache@v4`来缓存Cargo的依赖项，减少后续运行的构建时间。缓存路径包括Cargo的二进制文件、注册表索引、注册表缓存、git数据库和目标目录。这样，如果`Cargo.lock`文件没有变化，后续运行可以重用这些缓存，加速构建过程。
- **工件上传**：在Windows作业中，构建完成后，将生成的二进制文件（`yas_artifact.exe`和`yas_relic.exe`）重命名并上传为工件。

#### 持续集成

持续集成（CI）支持团队成员将代码频繁地集成到共享的版本控制仓库中。其中也涉及到了自动化测试，目的是尽可能快速发现和解决集成问题。

- **Github Actions系统**：借助Github上提供的持续集成和持续交付 (CI/CD) 平台，可创建工作流程来构建和测试存储库的每个拉取请求或将合并的拉取请求部署到生产环境。

![持续集成](自动化.assets\持续集成.png)



