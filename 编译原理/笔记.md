## CFG

语法分析：区分出什么token stream是在C中是合法的，什么是不合法的

正则表达式不再适用，不够powerful



#### 变量声明

- 以int类或者float类开头
- 以变量token，以逗号分隔
- 以分号结尾

#### 上下文无关文法CFG

四个部分

- T
- N
- S
- sigma：推导规则
  - 声明-》type idlist
  - idlist递归
  - 终结符

#### 标识规范

- 终结符号
  - 靠前小写字母
  - 运算符
  - 标点符号
  - 数字
  - 加粗id或者if
- 非终结符号
  - 靠前大写字母
  - 小写斜体
- 靠前大写字母：可能终结符也可能非终结符
- 靠前小写字母：终结符
- 希腊字母：可能终结可能非终结
- 除非特别说明，第一个产生式的左手边代表开始符号



#### 语法检查

语法检查本质是不停套用规则进行推导

- 产生规则：LHS-》RHS
- 推导：规则使用若干次



## CFG

上下文无关文法（Context-Free Grammar, CFG）是一种用于生成所有可能的字符串（符合某种特定语法的字符串）的形式语法。它特别适用于描述编程语言的语法、自然语言的结构等。CFG 是由一组产生式规则组成的，这些规则定义了如何从一个或多个变量（非终结符）生成字符串（包括终结符和非终结符的序列）。

### 基本组成

CFG 主要由四个部分组成：

1. **非终结符（Non-terminals）**：变量，它们表示字符串集合的符号。
2. **终结符（Terminals）**：基本符号，构成字符串的实际字符。
3. **产生式规则（Production rules）**：形式为 $A \rightarrow \beta$ 的规则，表示非终结符 \(A\) 可以被替换为字符串 $\beta$，其中$ \beta $是终结符和非终结符的序列。
4. **开始符号（Start symbol）**：特定的非终结符，用作产生字符串的初始符号。

### 流程

CFG 的工作流程通常包括以下步骤：

1. **初始化**：选择开始符号作为当前的表达式或字符串。
2. **应用产生式规则**：选择一个适用的产生式规则（其中左侧的非终结符存在于当前字符串中）并应用它，即用规则右侧的符号串替换左侧的非终结符。
3. **重复**：重复应用产生式规则直到当前字符串不再含有非终结符，此时得到的字符串只包含终结符。
4. **结束**：当不再能应用任何产生式规则时，生成过程结束。此时的字符串是语言的一个句子。

### 规则

CFG 的规则（或产生式）遵循以下基本形式：

- $A \rightarrow \gamma$

其中，\(A\) 是一个非终结符，$\gamma$ 是由非终结符和终结符组成的序列，意味着 \(A\) 可以被替换为$\gamma$。这些规则共同定义了从开始符号出发能够生成的所有字符串的集合。

### 示例

要用上下文无关文法（CFG）来识别语言$ \{a^n c b^n | n \geq 0\}$，我们可以构造一个简单的文法，该文法生成的字符串以相同数量的 'a' 开头和 'b' 结尾，中间有一个 'c'。CFG 的一个基本组成是产生式规则（production rules），它们定义了如何从一个或多个变量中生成字符串。

一个可能的CFG如下：

1. $S \rightarrow aSb$
2. $S \rightarrow c$

这里，\(S\) 是起始符号。这个文法的工作方式如下：

- 规则1允许在字符串的开始添加一个 'a'，并在字符串的末尾添加一个 'b'。这保证了字符串两端的 'a' 和 'b' 的数量始终相等。
- 规则2允许 'S' 被替换为 'c'，这是递归的终止条件，确保了字符串的中心有一个 'c'。

例如，为了生成字符串 "aaccbb"，递归过程将会是这样的：

1. $S$
2. $aSb$（应用规则1）
3. $aaSbb$ （再次应用规则1）
4. $aacbb$（应用规则2来结束递归）

通过这种方式，上下文无关文法能够生成所有形式为 $a^n c b^n$ 的字符串，其中 $n \geq 0$。这展示了CFG相比正则表达式在表示能力上的优势，能够描述更复杂的语言类别，如上下文无关语言。

------------

#### 3/19

语言分类：四种文法

- type0:无限制文法，可以随意乱变
- type1:上下文有关文法
  - 限制：
    - 左边LHS必须短于右边
    - RHS不能为空
- type2:上下文无关文法CFG
  - 限制：
    - LHS必须为单个非终结符
    - RHS不能为空
- type3:正则语法
  - 限制：
    - LHS：单个非终结符
    - RHS：非终结符之后跟着一个终结符或者一个终结符



文法与推导：

- 最左推导
- 最右推导

为了保证推导语义一致。

消除歧义：

- 指定优先级：保证乘法在加法下一层
- 指定结合性：
